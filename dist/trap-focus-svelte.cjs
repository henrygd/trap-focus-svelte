let t=[];exports.trapFocus=function(e,n=1){function o(){const t=[...e.querySelectorAll("*")].filter((t=>t.tabIndex>=0));return[t.at(0)??e,t.at(-1)??e]}let c;function u(){t.push(e),c=document.activeElement,o().at(0).focus()}function r(){t.pop(),c.focus()}n&&u();const s=e=>t.at(-1)?.contains(e),a=((f=document).addEventListener("focusin",i=t=>{if(!s(e)||s(t.target))return;const[n,c]=o(),u=t.relatedTarget;u&&s(u)&&u!==c?u!==n&&u!==e?u.focus():c.focus():n.focus()}),()=>f.removeEventListener("focusin",i));var f,i;return{update(t){t?u():r()},destroy(){a(),r()}}};
