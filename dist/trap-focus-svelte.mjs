let e=[];function t(t,n=1){let o,c=0;function u(){const e=Array.from(t.querySelectorAll("*")).filter((e=>e.tabIndex>=0));return[e.at(0)??t,e.at(-1)??t]}function r(){e.push(t),o=document.activeElement,u().at(0)?.focus()}function s(){e=e.filter((e=>e!=t)),o.focus()}n&&r();const f=t=>e.at(-1)?.contains(t),i=e=>{if(f(t)){const[t,n]=u();e.target==t&&c?n.focus():e.target!=n||c||t.focus()}},d=e=>{if(f(t)&&!f(e.target)){const[e,t]=u();(c?t:e).focus()}},a=e=>c=e.shiftKey&&"Tab"==e.key;return document.addEventListener("keydown",a),document.addEventListener("focusout",i),document.addEventListener("focusin",d),{update(e){e?r():s()},destroy(){s(),document.removeEventListener("focusout",i),document.removeEventListener("focusin",d),document.removeEventListener("keydown",a)}}}export{t as trapFocus};
